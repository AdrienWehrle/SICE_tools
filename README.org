# SICE_tools
Tools developed as part of the [[http://snow.geus.dk/][SICE project]] at GEUS (Geological Survey of Denmark and Greenland). 


* Table of Contents                               :toc_2:noexport:
- [[#development-environment][Development Environment]]
- [[#tools-description][Tools description]]
  - [[#extract_esalcpy][extract_esalc.py]]
  - [[#extract_arcticdempy][extract_arcticdem.py]]
  - [[#get_IBOARpy][get_IBOAR.py]]
  - [[#SICE_products_availabilitypy][SICE_products_availability.py]]
  - [[#get_correlationspy][get_correlations.py]]
  
  
* Development Environment
+ These tools have been developed using a conda virtual environment that can be identically recreated. To this end, create a new      
  environment using [[./SICE_tools.yml]] as below:
  #+BEGIN_SRC bash :results verbatim
  conda env create -f SICE_tools.yml
  #+END_SRC
  =ResolvePackageNotFound= error can be raised. In that case, run =conda env export --no-builds > SICE_tools.yml= instead. \\
  Then, run =conda activate SICE_tools= to activate this new virtual environment.


+ The repository can also be run interactively without any download on Binder:

  [[https://mybinder.org/v2/gh/AdrienWehrle/SICE_tools/master][https://mybinder.org/badge_logo.svg]]

* Tools description
** extract_esalc.py
+ Clips, reprojects and compresses [[https://www.esa-landcover-cci.org/?q=node/197][ESA global Land Cover (ESALC) products]] (downloadable [[https://cds.climate.copernicus.eu/cdsapp#!/dataset/satellite-land-cover?tab=form][here]]) for a given region. Converts the resulting .tif file to be usable in the [[https://github.com/mankoff/SICE][SICE toolchain]]. 
+ Iceland, Svalbard, FransJosefLand, NovayaZemlya, SevernayaZemlya, JanMayen, NorthernArcticCanada, SouthernArcticCanada, Norway, Beaufort and AntarcticPeninsula are currently implemented.
+ Results have been merged in the master branch of the [[https://github.com/mankoff/SICE][SICE toolchain]] and can be found [[https://github.com/mankoff/SICE/tree/master/masks][here]].
+ A description of the 22 [[https://www.esa-landcover-cci.org/?q=node/197][ESA global Land Cover (ESALC) products]] can be found [[https://www.esa-landcover-cci.org/?q=webfm_send/84][here]].

** extract_arcticdem.py
+ Clips [[https://www.pgc.umn.edu/data/arcticdem/][ArcticDEM]] (downloadable [[http://data.pgc.umn.edu/elev/dem/setsm/ArcticDEM/mosaic/v3.0/][here]]) derived slopes and slope aspects for a given region based on a mask. 
+ Slopes and slope aspects have been computed using the [[https://step.esa.int/main/toolboxes/snap/)][SNAP]] Slope Calculation operator. 
+ Masks have been generated using [[./extract_esalc.py]].

** get_IBOAR.py
+ Computes Effective Solar Zenith Angles (SZA) and Viewing Zenith Angles (VZA) based on [[https://github.com/maximlamare/s3_tools/blob/master/change_tiepoint.py][s3_tools]]. 
+ The Intrinsic Bottom of Atmosphere Reflectance (IBOAR) is calculated for a given scene and given bands. 
+ Uses ArcticDEM derived slopes and slope aspects generated using [[./extract_arcticdem.py]] and Rayleigh corrected Bottom of atmosphere Reflectances (BRR) using the [[https://step.esa.int/main/toolboxes/snap/)][SNAP]] Rayleigh Correction Processor. 

** SICE_products_availability.py

+ Checks the availability of the [[https://github.com/mankoff/SICE][SICE toolchain]] products using a list or a csv file containing the product names.
+ Option to run the functions by multiprocessing to drastically decrease computation time.
+ Outputs can be saved in a csv file and/or represented in a figure.

** get_correlations.py

+ Computes the correlation between two variables stored in rasters over a given specific area.
+ The default variables are the Snow Grain Diameter (SGD) computed by the [[https://github.com/mankoff/SICE][SICE toolchain]] and the   
  percentage of variations between the Bottom Of Atmosphere Reflectance (BOAR) and the Intrinsic Bottom Of Atmosphere Reflectance 
  (IBOAR) determined by [[./get_IBOAR.py]]. This example can be easily modified with other variables and      
  another function to apply.
+ The function is run by multiprocessing to drastically decrease computation time.

